<div class="breadcrumb">
    <a routerLink="/home">หน้าหลัก</a> > จัดการข้อมูล
</div>
<div class="center">
    <h1>จัดการข้อมูล</h1>
</div>
<nav mat-tab-nav-bar [tabPanel]="tabPanel">
    <a mat-tab-link routerLink="/opensubject-manage">วิชาที่เปิดสอน</a>
    <a mat-tab-link routerLink="/classroom-manage">ห้องเรียน</a>
    <a mat-tab-link routerLink="/subject-manage">กลุ่มสาระการเรียนรู้</a>
    <a mat-tab-link routerLink="/person-manage">บุคคล</a>
    </nav>
<mat-tab-nav-panel #tabPanel></mat-tab-nav-panel>

<mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start">
    <mat-tab label="วิชาที่เปิดสอน" routerLink="course">
        <br />
        <h2>วิชาที่เปิดสอน</h2>
        <div fxLayout="row wrap" fxLayoutGap="grid">
            <div fxFlex="50%" fxFlex.xs="100%">
                <button mat-raised-button color="primary" routerLink="/open-subject-create">+
                    เพิ่มวิชาที่เปิดสอน</button>
            </div>
        </div>
        <br />
        <table mat-table [dataSource]="data_openSubject.Data" class="mat-elevation-z8 full-width"
            *ngIf="data_openSubject.Data">
            <ng-container matColumnDef="No">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let i = index">{{ data_openSubject.LastCount + i + 1 }}</td>
            </ng-container>
            <ng-container matColumnDef="SubjectCode">
                <th mat-header-cell *matHeaderCellDef>รหัสวิชา</th>
                <td mat-cell *matCellDef="let element">{{ element.Subject?.Code }}</td>
            </ng-container>
            <ng-container matColumnDef="SubjectName">
                <th mat-header-cell *matHeaderCellDef>วิชา</th>
                <td mat-cell *matCellDef="let element">{{ element.Subject?.Name }}</td>
            </ng-container>
            <ng-container matColumnDef="MainTeacherId">
                <th mat-header-cell *matHeaderCellDef>ครูผู้สอน</th>
                <td mat-cell *matCellDef="let element">{{ element.Teacher?.Prefix }}{{ element.Teacher?.Name }} {{
                    element.Teacher?.Lastname }}</td>
            </ng-container>
            <ng-container matColumnDef="Actions">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let element">
                    <button mat-button [routerLink]="['/open-subject-details']" [queryParams]="{id:element.Id}">
                        <mat-icon>search</mat-icon>
                    </button>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="['No','SubjectCode','SubjectName','MainTeacherId','Actions']">
            </tr>
            <tr mat-row *matRowDef="let row; columns: ['No','SubjectCode','SubjectName','MainTeacherId','Actions'];">
            </tr>
        </table>
        <br />
        <app-skeleton *ngIf="!data_openSubject.Data" [style]="'table'" [column]="4"></app-skeleton>

        <h2>ลงทะเบียนห้องเรียน</h2>
        <div fxLayout="row wrap" fxLayoutGap="grid">
            <div fxFlex="50%" fxFlex.xs="100%">
                <button mat-raised-button color="primary" routerLink="/register-open-subject-create">+
                    ลงทะเบียนห้องเรียน</button>
            </div>
        </div>
        <br />
        <table mat-table [dataSource]="data_registerOpenSubject.Data" class="mat-elevation-z8 full-width"
            *ngIf="data_registerOpenSubject.Data">
            <ng-container matColumnDef="No">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let i = index">{{ data_registerOpenSubject.LastCount + i + 1 }}</td>
            </ng-container>
            <ng-container matColumnDef="Classroom">
                <th mat-header-cell *matHeaderCellDef>ห้องเรียน</th>
                <td mat-cell *matCellDef="let element">{{ GetTierAbb(element.Classroom?.Tier) }} {{
                    element.Classroom?.ClassYear }} / {{ element.Classroom?.Subclass }}</td>
            </ng-container>
            <ng-container matColumnDef="Subject">
                <th mat-header-cell *matHeaderCellDef>วิชาที่เรียน</th>
                <td mat-cell *matCellDef="let element">
                    <div *ngFor="let item of fetchSubject(element.OpenSubjectIds)">{{ item.Code }} {{ item.Name }}</div>
                </td>
            </ng-container>
            <ng-container matColumnDef="Actions">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let element">
                    <button mat-button [routerLink]="['/register-open-subject-details']" [queryParams]="{id:element.Classroom.Id}">
                        <mat-icon>search</mat-icon>
                    </button>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="['No','Classroom','Subject','Actions']">
            </tr>
            <tr mat-row *matRowDef="let row; columns: ['No','Classroom','Subject','Actions'];">
            </tr>
        </table>
        <br />
        <app-skeleton *ngIf="!data_registerOpenSubject.Data" [style]="'table'" [column]="4"></app-skeleton>
    </mat-tab>
    <mat-tab label="ห้องเรียน">
        <br />
        <h2>ห้องเรียน</h2>
        <div fxLayout="row wrap" fxLayoutGap="grid">
            <div fxFlex="50%" fxFlex.xs="100%">
                <button mat-raised-button color="primary" routerLink="/classroom-create">+
                    เพิ่มห้องเรียน</button>
            </div>
        </div>
        <br />
        <table mat-table [dataSource]="data_classroom.Data" class="mat-elevation-z8 full-width"
            *ngIf="data_classroom.Data">
            <ng-container matColumnDef="No">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let i = index">{{ data_classroom.LastCount + i + 1 }}</td>
            </ng-container>
            <ng-container matColumnDef="Tier">
                <th mat-header-cell *matHeaderCellDef>ระดับ</th>
                <td mat-cell *matCellDef="let element">{{ GetTier(element.Tier) }}</td>
            </ng-container>
            <ng-container matColumnDef="Classroom">
                <th mat-header-cell *matHeaderCellDef>ห้องเรียน</th>
                <td mat-cell *matCellDef="let element">{{ element.ClassYear }} / {{ element.Subclass }}</td>
            </ng-container>
            <ng-container matColumnDef="TeacherName">
                <th mat-header-cell *matHeaderCellDef>ครูประจำชั้น</th>
                <td mat-cell *matCellDef="let element">{{ element.Teacher?.Prefix }}{{ element.Teacher?.Name }} {{
                    element.Teacher?.Lastname }}</td>
            </ng-container>
            <ng-container matColumnDef="StudentCount">
                <th mat-header-cell *matHeaderCellDef>จำนวนนักเรียน</th>
                <td mat-cell *matCellDef="let element">{{ element.StudentCount }}</td>
            </ng-container>
            <ng-container matColumnDef="Actions">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let element">
                    <button mat-button [routerLink]="['/classroom-details']" [queryParams]="{id:element.Id}">
                        <mat-icon>search</mat-icon>
                    </button>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="['No','Tier','Classroom','TeacherName','StudentCount','Actions']">
            </tr>
            <tr mat-row
                *matRowDef="let row; columns: ['No','Tier','Classroom','TeacherName','StudentCount','Actions'];">
            </tr>
        </table>
        <br />
        <app-skeleton *ngIf="!data_classroom.Data" [style]="'table'" [column]="4"></app-skeleton>

        <h2>นักเรียนในห้องเรียน</h2>
        <div fxLayout="row wrap" fxLayoutGap="grid">
            <div fxFlex="50%" fxFlex.xs="100%">
                <button mat-raised-button color="primary" routerLink="/classroom-student-create">+
                    เพิ่มนักเรียนในห้องเรียน</button>
            </div>
        </div>
        <br />
        <table mat-table [dataSource]="data_classroomStudent.Data" class="mat-elevation-z8 full-width"
            *ngIf="data_classroomStudent.Data">
            <ng-container matColumnDef="No">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let i = index">{{ data_classroomStudent.LastCount + i + 1 }}</td>
            </ng-container>
            <ng-container matColumnDef="Tier">
                <th mat-header-cell *matHeaderCellDef>ระดับ</th>
                <td mat-cell *matCellDef="let element">{{ GetTier(element.Classroom?.Tier) }}</td>
            </ng-container>
            <ng-container matColumnDef="Classroom">
                <th mat-header-cell *matHeaderCellDef>ห้องเรียน</th>
                <td mat-cell *matCellDef="let element">{{ element.Classroom?.ClassYear }} / {{
                    element.Classroom?.Subclass }}
                </td>
            </ng-container>
            <ng-container matColumnDef="StudentName">
                <th mat-header-cell *matHeaderCellDef>นักเรียน</th>
                <td mat-cell *matCellDef="let element">{{ element.Student?.Prefix }}{{ element.Student?.Name }} {{
                    element.Student?.Lastname }}</td>
            </ng-container>
            <ng-container matColumnDef="Actions">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let element">
                    <button mat-button [routerLink]="['/classroom-student-details']" [queryParams]="{id:element.Id}">
                        <mat-icon>search</mat-icon>
                    </button>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="['No','Tier','Classroom','StudentName','Actions']">
            </tr>
            <tr mat-row *matRowDef="let row; columns: ['No','Tier','Classroom','StudentName','Actions'];">
            </tr>
        </table>
        <br />
        <app-skeleton *ngIf="!data_classroomStudent.Data" [style]="'table'" [column]="4"></app-skeleton>
    </mat-tab>
    <mat-tab label="กลุ่มสาระการเรียนรู้">
        <br />
        <h2>กลุ่มสาระการเรียนรู้</h2>
        <div fxLayout="row wrap" fxLayoutGap="grid">
            <div fxFlex="50%" fxFlex.xs="100%">
                <button mat-raised-button color="primary" routerLink="/learning-area-create">+
                    เพิ่มกลุ่มสาระการเรียนรู้</button>
            </div>
        </div>
        <br />
        <table mat-table [dataSource]="data_learningArea.Data" class="mat-elevation-z8 full-width"
            *ngIf="data_learningArea.Data">
            <ng-container matColumnDef="No">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let i = index">{{ data_learningArea.LastCount + i + 1 }}</td>
            </ng-container>
            <ng-container matColumnDef="Name">
                <th mat-header-cell *matHeaderCellDef>กลุ่มสาระการเรียนรู้</th>
                <td mat-cell *matCellDef="let element">{{ element.Name }}</td>
            </ng-container>
            <ng-container matColumnDef="Description">
                <th mat-header-cell *matHeaderCellDef>คำอธิบายเพิ่มเติม</th>
                <td mat-cell *matCellDef="let element">{{ element.Description }}</td>
            </ng-container>
            <ng-container matColumnDef="Actions">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let element">
                    <button mat-button [routerLink]="['/learning-area-details']" [queryParams]="{id:element.Id}">
                        <mat-icon>search</mat-icon>
                    </button>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="['No','Name','Description','Actions']">
            </tr>
            <tr mat-row *matRowDef="let row; columns: ['No','Name','Description','Actions'];">
            </tr>
        </table>
        <br />
        <app-skeleton *ngIf="!data_learningArea.Data" [style]="'table'" [column]="4"></app-skeleton>

        <h2>วิชา</h2>
        <div fxLayout="row wrap" fxLayoutGap="grid">
            <div fxFlex="50%" fxFlex.xs="100%">
                <button mat-raised-button color="primary" routerLink="/subject-create">+
                    เพิ่มวิชา</button>
            </div>
        </div>
        <br />
        <table mat-table [dataSource]="data_subject.Data" class="mat-elevation-z8 full-width" *ngIf="data_subject.Data">
            <ng-container matColumnDef="No">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let i = index">{{ data_subject.LastCount + i + 1 }}</td>
            </ng-container>
            <ng-container matColumnDef="Name">
                <th mat-header-cell *matHeaderCellDef>วิชา</th>
                <td mat-cell *matCellDef="let element">{{ element.Name }}</td>
            </ng-container>
            <ng-container matColumnDef="Description">
                <th mat-header-cell *matHeaderCellDef>คำอธิบายเพิ่มเติม</th>
                <td mat-cell *matCellDef="let element">{{ element.Description }}</td>
            </ng-container>
            <ng-container matColumnDef="LearningAreaName">
                <th mat-header-cell *matHeaderCellDef>กลุ่มสาระการเรียนรู้</th>
                <td mat-cell *matCellDef="let element">{{ element.LearningArea?.Name }}</td>
            </ng-container>
            <ng-container matColumnDef="Actions">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let element">
                    <button mat-button [routerLink]="['/subject-details']" [queryParams]="{id:element.Id}">
                        <mat-icon>search</mat-icon>
                    </button>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="['No','Name','Description','LearningAreaName','Actions']">
            </tr>
            <tr mat-row *matRowDef="let row; columns: ['No','Name','Description','LearningAreaName','Actions'];">
            </tr>
        </table>
        <br />
        <app-skeleton *ngIf="!data_subject.Data" [style]="'table'" [column]="4"></app-skeleton>
    </mat-tab>
    <mat-tab label="บุคคล">
        <br />
        <h2>ครู</h2>
        <div fxLayout="row wrap" fxLayoutGap="grid">
            <div fxFlex="50%" fxFlex.xs="100%">
                <button mat-raised-button color="primary" routerLink="/teacher-create">+ เพิ่มครู</button>
            </div>
        </div>
        <br />
        <table mat-table [dataSource]="data_teacher.Data" class="mat-elevation-z8 full-width" *ngIf="data_teacher.Data">
            <ng-container matColumnDef="No">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let i = index">{{ data_teacher.LastCount + i + 1 }}</td>
            </ng-container>
            <ng-container matColumnDef="Code">
                <th mat-header-cell *matHeaderCellDef>รหัสประจำตัว</th>
                <td mat-cell *matCellDef="let element">{{ element.Code }}</td>
            </ng-container>
            <ng-container matColumnDef="Name">
                <th mat-header-cell *matHeaderCellDef>ชื่อ</th>
                <td mat-cell *matCellDef="let element">{{ element.Prefix }}{{ element.Name }} {{ element.Lastname }}
                </td>
            </ng-container>
            <ng-container matColumnDef="PID">
                <th mat-header-cell *matHeaderCellDef>รหัสประชาชน</th>
                <td mat-cell *matCellDef="let element">{{ element.PID }}</td>
            </ng-container>
            <ng-container matColumnDef="Actions">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let element">
                    <button mat-button [routerLink]="['/teacher-details']" [queryParams]="{id:element.Id}">
                        <mat-icon>search</mat-icon>
                    </button>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="['No','Code','Name','PID','Actions']">
            </tr>
            <tr mat-row *matRowDef="let row; columns: ['No','Code','Name','PID','Actions'];">
            </tr>
        </table>
        <br />
        <app-skeleton *ngIf="!data_teacher.Data" [style]="'table'" [column]="4"></app-skeleton>

        <h2>นักเรียน</h2>
        <div fxLayout="row wrap" fxLayoutGap="grid">
            <div fxFlex="50%" fxFlex.xs="100%">
                <button mat-raised-button color="primary" routerLink="/student-create">+ เพิ่มนักเรียน</button>
            </div>
        </div>
        <br />
        <table mat-table [dataSource]="data_student.Data" class="mat-elevation-z8 full-width" *ngIf="data_student.Data">
            <ng-container matColumnDef="No">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let i = index">{{ data_student.LastCount + i + 1 }}</td>
            </ng-container>
            <ng-container matColumnDef="Code">
                <th mat-header-cell *matHeaderCellDef>รหัสประจำตัว</th>
                <td mat-cell *matCellDef="let element">{{ element.Code }}</td>
            </ng-container>
            <ng-container matColumnDef="Name">
                <th mat-header-cell *matHeaderCellDef>ชื่อ</th>
                <td mat-cell *matCellDef="let element">{{ element.Prefix }}{{ element.Name }} {{ element.Lastname }}
                </td>
            </ng-container>
            <ng-container matColumnDef="PID">
                <th mat-header-cell *matHeaderCellDef>รหัสประชาชน</th>
                <td mat-cell *matCellDef="let element">{{ element.PID }}</td>
            </ng-container>
            <ng-container matColumnDef="Actions">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let element">
                    <button mat-button [routerLink]="['/student-details']" [queryParams]="{id:element.Id}">
                        <mat-icon>search</mat-icon>
                    </button>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="['No','Code','Name','PID','Actions']">
            </tr>
            <tr mat-row *matRowDef="let row; columns: ['No','Code','Name','PID','Actions'];">
            </tr>
        </table>
        <br />
        <app-skeleton *ngIf="!data_student.Data" [style]="'table'" [column]="4"></app-skeleton>
    </mat-tab>
</mat-tab-group>